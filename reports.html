<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>דוחות וסיכומים - מה מצבינו</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="app-shell">

  <header class="app-header">
    <div class="app-header-top">
      <h1 class="app-title">דוחות וסיכומים</h1>
      <nav class="header-actions">
        <a href="{{ url_for('index', month=selected_month) }}" class="header-link">חזרה לרשימה</a>
      </nav>
    </div>

    {% if months %}
      <form method="get" class="filter-bar">
        <label for="month-select">חודש:</label>
        <select id="month-select" name="month" onchange="this.form.submit()">
          {% for m in months %}
            <option value="{{ m.key }}" {% if m.key == selected_month %}selected{% endif %}>
              {{ m.label }}
            </option>
          {% endfor %}
        </select>
      </form>
    {% endif %}
  </header>

  <main class="content">

    <h2 class="section-title">סיכום לחודש הנבחר</h2>

    {% if monthly_summary and monthly_summary|length > 0 %}
      {% for row in monthly_summary %}
        <section class="card">
          <div class="card-row">
            <span>{{ row["month"] }}/{{ row["year"] }}</span>
            <span class="amount">{{ "%.2f" | format(row["total"]) }} ₪</span>
          </div>
        </section>
      {% endfor %}
    {% else %}
      <p class="empty-state">אין נתונים לחודש שנבחר.</p>
    {% endif %}

    <h2 class="section-title">סיכום לפי קטגוריות</h2>

    {% if category_summary and category_summary|length > 0 %}
      {% for row in category_summary %}
        <section class="card">
          <div class="card-row">
            <span>{{ row["category"] }}</span>
            <span class="amount">{{ "%.2f" | format(row["total"]) }} ₪</span>
          </div>
        </section>
      {% endfor %}
    {% else %}
      <p class="empty-state">אין עדיין נתונים לפי קטגוריות לחודש שנבחר.</p>
    {% endif %}

  </main>

</div>
</body>
</html>
